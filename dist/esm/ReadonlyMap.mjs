import{fromEquals as e}from"./Eq.mjs";import{SK as t,pipe as r}from"./function.mjs";import{flap as n}from"./Functor.mjs";import{isLeft as l,isNone as u,isSome as i,none as a,some as o}from"./internal.mjs";import{map as d}from"./Option.mjs";import{separated as p}from"./Separated.mjs";import{wiltDefault as f,witherDefault as c}from"./Witherable.mjs";let s=e=>new Map(e);function h(e){return new Map(e)}function M(e,t){return{show:r=>{let n=[];return r.forEach((r,l)=>{n.push(`[${e.show(l)}, ${t.show(r)}]`)}),`new Map([${n.sort().join(", ")}])`}}}let m=e=>e.size,v=e=>0===e.size;function x(e){let t=F(e);return(r,n)=>{if(void 0===n){let t=x(e);return e=>t(r,e)}return i(t(r,n))}}function g(e){return(t,r)=>{let n;if(void 0===r){let r=g(e);return e=>r(t,e)}let l=r.values();for(;!(n=l.next()).done;){let r=n.value;if(e.equals(t,r))return!0}return!1}}let W=e=>t=>Array.from(t.keys()).sort(e.compare),I=e=>t=>Array.from(t.values()).sort(e.compare);function w(e){let t=W(e);return e=>r=>{let n=[];for(let l of t(r))n.push(e(l,r.get(l)));return n}}let R=e=>w(e)((e,t)=>[e,t]);function y(e,t){let r=R(e);return e=>{let n=r(e),l=n.length;return t.unfold(0,e=>e<l?o([n[e],e+1]):a)}}let b=e=>{let t=A(e);return(e,r)=>{let n=t(e);return t=>{let l=n(t);if(u(l)){let n=new Map(t);return n.set(e,r),n}if(l.value[1]!==r){let e=new Map(t);return e.set(l.value[0],r),e}return t}}},q=e=>{let t=A(e);return e=>r=>{let n=t(e,r);if(i(n)){let e=new Map(r);return e.delete(n.value[0]),e}return r}},E=e=>{let t=_(e);return(e,r)=>t(e,()=>r)},_=e=>{let t=A(e);return(e,r)=>n=>{let l=t(e,n);if(u(l))return a;let[i,d]=l.value,p=r(d);if(p===d)return o(n);let f=new Map(n);return f.set(i,p),o(f)}};function j(e){let t=F(e),n=q(e);return e=>{let l=n(e);return n=>r(t(e,n),d(e=>[e,l(n)]))}}function A(e){return(t,r)=>{let n;if(void 0===r){let r=A(e);return e=>r(t,e)}let l=r.entries();for(;!(n=l.next()).done;){let[r,l]=n.value;if(e.equals(r,t))return o([r,l])}return a}}function F(e){let t=A(e);return(n,l)=>{if(void 0===l){let t=F(e);return e=>t(n,e)}return r(t(n,l),d(([e,t])=>t))}}function S(e,t){let r=A(e);return(n,l)=>{let i;if(void 0===l){let r=S(e,t);return e=>r(e,n)}let a=n.entries();for(;!(i=a.next()).done;){let[n,a]=i.value,o=r(n,l);if(u(o)||!e.equals(n,o.value[0])||!t.equals(a,o.value[1]))return!1}return!0}}let k=new Map;function U(t,r){let n=S(t,r);return e((e,t)=>n(e,t)&&n(t,e))}function z(e,t){let r=A(e);return{concat:(e,n)=>{let l;if(v(e))return n;if(v(n))return e;let u=new Map(e),a=n.entries();for(;!(l=a.next()).done;){let[n,a]=l.value,o=r(n,e);i(o)?u.set(o.value[0],t.concat(o.value[1],a)):u.set(n,a)}return u},empty:k}}let $=(e,t)=>new Map([[e,t]]);function K(e,t,r){return n=>{let l=A(e);return r.reduce(n,new Map,(e,[r,n])=>{let u=l(r,e);return i(u)?e.set(u.value[0],t.concat(u.value[1],n)):e.set(r,n),e})}}let T=(e,t)=>{let r,n=new Map,l=e.entries();for(;!(r=l.next()).done;){let[e,l]=r.value;n.set(e,t(e,l))}return n},C=e=>t=>{let r,n=new Map,u=new Map,i=t.entries();for(;!(r=i.next()).done;){let[t,i]=r.value,a=e(t,i);l(a)?n.set(t,a.left):u.set(t,a.right)}return p(n,u)};function D(e){return t=>{let r,n=new Map,l=new Map,u=t.entries();for(;!(r=u.next()).done;){let[t,u]=r.value;e(t,u)?l.set(t,u):n.set(t,u)}return p(n,l)}}let O=e=>t=>{let r,n=new Map,l=t.entries();for(;!(r=l.next()).done;){let[t,l]=r.value,u=e(t,l);i(u)&&n.set(t,u.value)}return n};function B(e){return t=>{let r,n=new Map,l=t.entries();for(;!(r=l.next()).done;){let[t,l]=r.value;e(t,l)&&n.set(t,l)}return n}}let G=(e,t)=>T(e,(e,r)=>t(r)),H=(e,t)=>P(e,(e,r)=>t(r)),J=(e,t)=>Q(e,(e,r)=>t(r)),L=(e,t)=>V(e,(e,r)=>t(r)),N=(e,t)=>X(e,(e,r)=>t(r)),P=(e,t)=>r(e,B(t)),Q=(e,t)=>r(e,O(t)),V=(e,t)=>r(e,D(t)),X=(e,t)=>r(e,C(t)),Y=e=>{let t,r=new Map,n=e.entries();for(;!(t=n.next()).done;){let[e,n]=t.value;i(n)&&r.set(e,n.value)}return r},Z=e=>t=>H(t,e),ee=e=>t=>J(t,e),et=e=>t=>G(t,e),er=e=>t=>T(t,e),en=e=>t=>L(t,e),el=e=>t=>N(t,e),eu=e=>{let t,r=new Map,n=new Map,u=e.entries();for(;!(t=u.next()).done;){let[e,u]=t.value;l(u)?r.set(e,u.left):n.set(e,u.right)}return p(r,n)},ei="ReadonlyMap",ea=(e,t)=>{let r=e_(e,t);return{concat:(e,t)=>r(t)(e)}},eo=(e,t)=>({concat:ea(e,t).concat,empty:k}),ed=(e,t)=>{let r=ej(e,t);return{concat:(e,t)=>r(t)(e)}},ep=e=>()=>{let t=eA(e);return{concat:(e,r)=>t(r)(e)}};function ef(){return{URI:ei,_E:void 0,map:G,mapWithIndex:T,compact:Y,separate:eu,filter:H,filterMap:J,partition:L,partitionMap:N,partitionMapWithIndex:X,partitionWithIndex:V,filterMapWithIndex:Q,filterWithIndex:P}}let ec={URI:ei,map:G},es=n(ec),eh=()=>({URI:ei,_E:void 0,map:G,mapWithIndex:T}),eM={URI:ei,compact:Y,separate:eu},em={URI:ei,map:G,compact:Y,separate:eu,filter:H,filterMap:J,partition:L,partitionMap:N},ev=e=>{let t=eI(e);return(e,r)=>t(e,(e,t,n)=>r(t,n))},ex=e=>{let t=ew(e);return e=>{let r=t(e);return e=>r((t,r)=>e(r))}},eg=e=>{let t=eR(e);return(e,r)=>t(e,(e,t,n)=>r(t,n))},eW=e=>{let t=ev(e),n=ex(e),l=eg(e);return{URI:ei,_E:void 0,reduce:(e,n,l)=>r(e,t(n,l)),foldMap:e=>{let t=n(e);return(e,n)=>r(e,t(n))},reduceRight:(e,t,n)=>r(e,l(t,n))}},eI=e=>{let t=W(e);return(e,r)=>n=>{let l=e;for(let e of t(n))l=r(e,l,n.get(e));return l}},ew=e=>{let t=W(e);return e=>r=>n=>{let l=e.empty;for(let u of t(n))l=e.concat(l,r(u,n.get(u)));return l}},eR=e=>{let t=W(e);return(e,r)=>n=>{let l=e,u=t(n),i=u.length;for(let e=i-1;e>=0;e--){let t=u[e];l=r(t,n.get(t),l)}return l}},ey=e=>{let t=eW(e),n=eI(e),l=ew(e),u=eR(e);return{URI:ei,_E:void 0,reduce:t.reduce,foldMap:t.foldMap,reduceRight:t.reduceRight,reduceWithIndex:(e,t,l)=>r(e,n(t,l)),foldMapWithIndex:e=>{let t=l(e);return(e,n)=>r(e,t(n))},reduceRightWithIndex:(e,t,n)=>r(e,u(t,n))}},eb=e=>{let t=eq(e),r=eW(e);return{URI:ei,_E:void 0,map:G,reduce:r.reduce,foldMap:r.foldMap,reduceRight:r.reduceRight,traverse:t.traverse,sequence:t.sequence}},eq=e=>{let r=ey(e),n=W(e),l=e=>(t,r)=>{let l=e.of(new Map),u=n(t),i=u.length;for(let n=0;n<i;n++){let i=u[n],a=t.get(i);l=e.ap(e.map(l,e=>t=>e.set(i,t)),r(i,a))}return l};return{URI:ei,_E:void 0,map:G,mapWithIndex:T,reduce:r.reduce,foldMap:r.foldMap,reduceRight:r.reduceRight,reduceWithIndex:r.reduceWithIndex,foldMapWithIndex:r.foldMapWithIndex,reduceRightWithIndex:r.reduceRightWithIndex,traverse:e=>{let t=l(e);return(e,r)=>t(e,(e,t)=>r(t))},sequence:e=>{let r=l(e);return e=>r(e,t)},traverseWithIndex:l}};function eE(e){let t=eq(e);return{URI:ei,_E:void 0,map:G,compact:Y,separate:eu,filter:H,filterMap:J,partition:L,partitionMap:N,reduce:t.reduce,foldMap:t.foldMap,reduceRight:t.reduceRight,traverse:t.traverse,sequence:t.sequence,mapWithIndex:T,reduceWithIndex:t.reduceWithIndex,foldMapWithIndex:t.foldMapWithIndex,reduceRightWithIndex:t.reduceRightWithIndex,traverseWithIndex:t.traverseWithIndex,wilt:f(t,eM),wither:c(t,eM)}}let e_=(e,t)=>{let r=F(e);return e=>n=>{let l;if(v(n))return e;if(v(e))return n;let a=new Map,o=n.entries();for(;!(l=o.next()).done;){let[n,u]=l.value,o=r(n)(e);i(o)?a.set(n,t.concat(u,o.value)):a.set(n,u)}let d=e.entries();for(;!(l=d.next()).done;){let[e,t]=l.value;u(r(e)(a))&&a.set(e,t)}return a}},ej=(e,t)=>{let r=F(e);return e=>n=>{let l;if(v(n)||v(e))return k;let u=new Map,a=n.entries();for(;!(l=a.next()).done;){let[n,a]=l.value,o=r(n)(e);i(o)&&u.set(n,t.concat(a,o.value))}return u}},eA=e=>{let t=x(e);return e=>r=>{let n;if(v(r))return e;if(v(e))return r;let l=new Map,u=r.entries();for(;!(n=u.next()).done;){let[r,u]=n.value;t(r)(e)||l.set(r,u)}let i=e.entries();for(;!(n=i.next()).done;){let[e,u]=n.value;t(e)(r)||l.set(e,u)}return l}},eF=b,eS={URI:ei,map:G,compact:Y,separate:eu,filter:H,filterMap:J,partition:L,partitionMap:N};export{eM as Compactable,em as Filterable,ec as Functor,ei as URI,w as collect,Y as compact,q as deleteAt,eA as difference,g as elem,k as empty,Z as filter,ee as filterMap,O as filterMapWithIndex,B as filterWithIndex,es as flap,ex as foldMap,ew as foldMapWithIndex,K as fromFoldable,s as fromMap,ep as getDifferenceMagma,U as getEq,ef as getFilterableWithIndex,eW as getFoldable,ey as getFoldableWithIndex,eh as getFunctorWithIndex,ed as getIntersectionSemigroup,z as getMonoid,M as getShow,eb as getTraversable,eq as getTraversableWithIndex,eo as getUnionMonoid,ea as getUnionSemigroup,eE as getWitherable,eF as insertAt,ej as intersection,v as isEmpty,S as isSubmap,W as keys,F as lookup,A as lookupWithKey,et as map,er as mapWithIndex,x as member,_ as modifyAt,en as partition,el as partitionMap,C as partitionMapWithIndex,D as partitionWithIndex,j as pop,eS as readonlyMap,ev as reduce,eg as reduceRight,eR as reduceRightWithIndex,eI as reduceWithIndex,eu as separate,$ as singleton,m as size,h as toMap,R as toReadonlyArray,y as toUnfoldable,e_ as union,E as updateAt,b as upsertAt,I as values};